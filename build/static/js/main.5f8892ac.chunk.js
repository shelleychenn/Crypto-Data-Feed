(this["webpackJsonpchallenge-2"]=this["webpackJsonpchallenge-2"]||[]).push([[0],{19:function(e,t,a){},20:function(e,t){e.exports="LOALZ1W81YDHFAK8"},21:function(e,t,a){e.exports=a(48)},26:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(18),c=a.n(r),s=(a(26),a(3)),o=a(4),i=a(2),m=a(6),h=a(5),u=a(8),d=a.n(u),p=(a(44),function(e){var t=e.entry;return l.a.createElement("tr",{className:"table-entries"},l.a.createElement("td",{className:"date"},t.date),l.a.createElement("td",{className:"open"},t.open),l.a.createElement("td",{className:"high"},t.high),l.a.createElement("td",{className:"low"},t.low),l.a.createElement("td",{className:"close"},t.close),l.a.createElement("td",{className:"volume"},t.volumn),l.a.createElement("td",{className:"market-cap"},t.marketCap))}),b=function(e){var t=e.data;return l.a.createElement("div",null,l.a.createElement("table",{className:"data-table"},l.a.createElement("thead",null,l.a.createElement("tr",{className:"table-entries"},l.a.createElement("th",{className:"date"},"date"),l.a.createElement("th",{className:"open"},"open"),l.a.createElement("th",{className:"high"},"high"),l.a.createElement("th",{className:"low"},"low"),l.a.createElement("th",{className:"close"},"close"),l.a.createElement("th",{className:"volume"},"volume"),l.a.createElement("th",{className:"market-cap"},"market cap"))),l.a.createElement("tbody",null,t.map((function(e){return l.a.createElement(p,{entry:e,key:e.date})})))))},v=(a(45),a(7)),f=a.n(v),g=a(19),C=a.n(g);f.a.defaults.global.defaultFontFamily="'PT Sans', sans-serif",f.a.defaults.global.elements.line.tension=0;var y=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).chartRef=l.a.createRef(),n.updateChart=function(){n.newChart&&n.newChart.destroy(),n.newChart=new f.a(n.myChartRef,{type:"line",data:{labels:n.state.date,datasets:[{label:"open",data:n.state.open,fill:!1,borderColor:"#6ad431"},{label:"high",data:n.state.high,fill:!1,borderColor:"#2966cf"},{label:"low",data:n.state.low,fill:!1,borderColor:"#d12e1f"},{label:"close",data:n.state.close,fill:!1,borderColor:"#2a302b"}]},options:{layout:{padding:{top:5,left:15,right:15,bottom:15}},scales:{xAxes:[{gridLines:{display:!0,drawBorder:!0}}],yAxes:[{gridLines:{display:!0,drawBorder:!0}}]}}}),n.newChart.update()},n.state={data:[]},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.myChartRef=this.chartRef.current.getContext("2d"),this.updateChart()}},{key:"render",value:function(){return this.newChart&&this.chartRef&&this.updateChart(),l.a.createElement("div",{className:C.a.graphContainer},l.a.createElement("canvas",{id:"myChart",ref:this.chartRef}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.priceData;return{close:a.close,date:a.date,high:a.high,low:a.low,marketCap:a.marketCap,open:a.open,volume:a.volume}}}]),a}(n.Component),E=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).getAllPrices=n.getAllInfo.bind(Object(i.a)(n)),n}return Object(o.a)(a,[{key:"getAllInfo",value:function(e){var t={date:[],open:[],high:[],low:[],close:[],volumn:[],marketCap:[]};for(var a in e)t.date.push(e[a].date),t.open.push(e[a].open),t.high.push(e[a].high),t.low.push(e[a].low),t.close.push(e[a].close),t.volumn.push(e[a].volumn),t.marketCap.push(e[a].marketCap);return t}},{key:"render",value:function(){return this.props.data&&this.props.data.length?l.a.createElement("div",{className:"classes-container"},l.a.createElement("header",null,l.a.createElement("h2",{className:"chart-title"},"Historical Time Series: ",this.props.symbol," - ",this.props.time)),l.a.createElement(y,{priceData:this.getAllInfo(this.props.data)})):l.a.createElement("h2",null,"Loading...")}}]),a}(n.Component),D=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={symbol:"",timeInterval:"MONTHLY",getCached:!1},n.handleSymbolChange=n.handleSymbolChange.bind(Object(i.a)(n)),n.handletimeIntervalChange=n.handletimeIntervalChange.bind(Object(i.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(i.a)(n)),n.changeGetCachedState=n.changeGetCachedState.bind(Object(i.a)(n)),n}return Object(o.a)(a,[{key:"handleSymbolChange",value:function(e){this.setState({symbol:e.target.value})}},{key:"handletimeIntervalChange",value:function(e){this.setState({timeInterval:e.target.value})}},{key:"changeGetCachedState",value:function(){this.setState({getCached:!0})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.getHistoricalDataForSearched(this.state),this.setState({symbol:"",timeInterval:"MONTHLY",getCached:!1})}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("form",{className:"form",onSubmit:this.handleSubmit},l.a.createElement("label",null,"Symbol:",l.a.createElement("input",{className:"symbol-input",type:"type",name:"symbol",value:this.state.symbol,placeholder:"BTC",onChange:this.handleSymbolChange})),l.a.createElement("select",{className:"drop-down",onChange:this.handletimeIntervalChange,defaultValue:this.state.timeInterval},l.a.createElement("option",{value:"MONTHLY",name:"timeInterval"},"MONTHLY"),l.a.createElement("option",{value:"WEEKLY",name:"timeInterval"},"WEEKLY"),l.a.createElement("option",{value:"DAILY",name:"timeInterval"},"DAILY")),"Get Cached:",l.a.createElement("label",{className:"switch"},l.a.createElement("input",{type:"checkbox",checked:this.state.getCached,onChange:this.changeGetCachedState}),l.a.createElement("span",{className:"slider round"})),l.a.createElement("button",{className:"search-button",onClick:this.handleSubmit},"Search")))}}]),a}(n.Component),S=a(20),N=a.n(S),k=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={priceData:[],symbol:"",time:"",error:!1},n.getBTCData=n.getBTCData.bind(Object(i.a)(n)),n.getHistoricalDataForSearched=n.getHistoricalDataForSearched.bind(Object(i.a)(n)),n.transformData=n.transformData.bind(Object(i.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getBTCData()}},{key:"getBTCData",value:function(){var e=this;d.a.get("https://www.alphavantage.co/query?function=DIGITAL_CURRENCY_DAILY&symbol=BTC&market=USD&outputsize=compact&apikey=".concat(N.a)).then((function(t){e.setState({priceData:[t.data["Time Series (Digital Currency Daily)"]]})})).catch((function(e){console.log(e)}))}},{key:"getHistoricalDataForSearched",value:function(e){var t=this;d.a.get("http://localhost:3001/price/".concat(e.symbol,"/").concat(e.timeInterval),{params:{getCached:e.getCached}}).then((function(a){var n=e.timeInterval,l=n.slice(1).toLowerCase(),r=n[0]+l,c=a.data["Time Series (Digital Currency ".concat(r,")")];t.setState({priceData:[c],symbol:e.symbol,time:r,error:!1})})).catch((function(e){console.log(e.response.status),console.log(e),t.setState({error:!0})}))}},{key:"transformData",value:function(e){var t=[];for(var a in e){var n={date:a,open:e[a]["1a. open (USD)"],high:e[a]["2a. high (USD)"],low:e[a]["3a. low (USD)"],close:e[a]["4a. close (USD)"],volumn:e[a]["5. volume"],marketCap:e[a]["6. market cap (USD)"]};t.push(n)}return t.slice(0,30)}},{key:"render",value:function(){var e=l.a.createElement("div",null,l.a.createElement("h1",{className:"page-header"},"Crypto Data Feeds"),l.a.createElement(D,{className:"input-form",getHistoricalDataForSearched:this.getHistoricalDataForSearched}));return this.state.error?l.a.createElement("div",null,e,l.a.createElement("h3",{className:"error-message"},"There's no data found! Try live search!")):l.a.createElement("div",{className:"App"},e,l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement(E,{data:this.transformData(this.state.priceData[0]),symbol:this.state.symbol,time:this.state.time}),l.a.createElement("br",null),l.a.createElement("hr",{className:"divider-line"}),l.a.createElement(b,{data:this.transformData(this.state.priceData[0])})))}}]),a}(n.Component);c.a.render(l.a.createElement(k,null),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.5f8892ac.chunk.js.map